if($(function(){$("#menu_toggle").click(function(){$("body").hasClass("nav-md")?($.cookie("menu","nav-sm",{expires:14,path:"/"}),$("body").removeClass("nav-md"),$("body").addClass("nav-sm"),$("#sidebar-menu li.active-sm ul").attr("style","display:none"),$("#sidebar-menu li ul").attr("style","display:none"),$("#sidebar-menu li").removeClass("active"),$("#sidebar-menu li").removeClass("active-sm"),$("body").hasClass("nav-sm")&&$(".menu-text").addClass("hidden"),$("#sidebar-menu li").hasClass("active")&&($("#sidebar-menu li.active").addClass("active-sm"),$("#sidebar-menu li.active").removeClass("active"))):($("body").hasClass("nav-sm")&&$.cookie("menu","nav-md",{expires:14,path:"/"}),$("body").removeClass("nav-sm"),$("body").addClass("nav-md"),$(".sidebar-footer").show(),$("body").hasClass("nav-md")&&$(".menu-text").removeClass("hidden"),$("#sidebar-menu li").hasClass("active-sm")&&($("#sidebar-menu li.active-sm").addClass("active"),$("#sidebar-menu li.active-sm").removeClass("active-sm")))}),$("#content_container").click(function(){$("body").hasClass("nav-sm")&&($("#sidebar-menu li").removeClass("nv active"),$("#sidebar-menu li ul").attr("style","display:none"))})}),$(function(){var a=window.location;$("#sidebar-menu a[href=\""+a+"\"]").parent("li").addClass("current-page")}),$(function(){$("[data-toggle=\"tooltip\"]").tooltip()}),$(".progress .progress-bar")[0]&&$(".progress .progress-bar").progressbar(),$(".js-switch")[0]){var elems=Array.prototype.slice.call(document.querySelectorAll(".js-switch"));elems.forEach(function(a){new Switchery(a,{color:"#26B99A"})})}$(".close-link").click(function(){var a=$(this).closest("div.x_panel");a.remove()});var __slice=[].slice;(function(a){var b;return b=function(){function b(b,c){var d,e,f,g=this;for(d in this.options=a.extend({},this.defaults,c),this.$el=b,f=this.defaults,f)e=f[d],null!=this.$el.data(d)&&(this.options[d]=this.$el.data(d));this.createStars(),this.syncRating(),this.$el.on("mouseover.starrr","span",function(a){return g.syncRating(g.$el.find("span").index(a.currentTarget)+1)}),this.$el.on("mouseout.starrr",function(){return g.syncRating()}),this.$el.on("click.starrr","span",function(a){return g.setRating(g.$el.find("span").index(a.currentTarget)+1)}),this.$el.on("starrr:change",this.options.change)}return b.prototype.defaults={rating:void 0,numStars:5,change:function(){}},b.prototype.createStars=function(){var a,b,c;for(c=[],a=1,b=this.options.numStars;1<=b?a<=b:a>=b;1<=b?a++:a--)c.push(this.$el.append("<span class='glyphicon .glyphicon-star-empty'></span>"));return c},b.prototype.setRating=function(a){return this.options.rating===a&&(a=void 0),this.options.rating=a,this.syncRating(),this.$el.trigger("starrr:change",a)},b.prototype.syncRating=function(a){var b,c,d,e;if(a||(a=this.options.rating),a)for(b=c=0,e=a-1;0<=e?c<=e:c>=e;b=0<=e?++c:--c)this.$el.find("span").eq(b).removeClass("glyphicon-star-empty").addClass("glyphicon-star");if(a&&5>a)for(b=d=a;4>=a?4>=d:4<=d;b=4>=a?++d:--d)this.$el.find("span").eq(b).removeClass("glyphicon-star").addClass("glyphicon-star-empty");return a?void 0:this.$el.find("span").removeClass("glyphicon-star").addClass("glyphicon-star-empty")},b}(),a.fn.extend({starrr:function(){var c,d;return d=arguments[0],c=2<=arguments.length?__slice.call(arguments,1):[],this.each(function(){var e;if(e=a(this).data("star-rating"),e||a(this).data("star-rating",e=new b(a(this),d)),"string"==typeof d)return e[d].apply(e,c)})}})})(window.jQuery,window),$(function(){return $(".starrr").starrr()}),$(document).ready(function(){prepareComponents(),$(".flat").on("ifChecked ifUnchecked",function(a){"ifChecked"==a.type?$("#"+$(this).attr("id")).val(1):$("#"+$(this).attr("id")).val(0)}),$("#stars").on("starrr:change",function(a,b){$("#count").html(b)}),$("#stars-existing").on("starrr:change",function(a,b){$("#count-existing").html(b)}),$("body").hasClass("nav-sm")&&$("#sidebar-menu li.active ul").hide()}),$("table input").on("ifChecked",function(){check_state="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$("table input").on("ifUnchecked",function(){check_state="",$(this).parent().parent().parent().removeClass("selected"),countChecked()});var check_state="";$(".bulk_action input").on("ifChecked",function(){check_state="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$(".bulk_action input").on("ifUnchecked",function(){check_state="",$(this).parent().parent().parent().removeClass("selected"),countChecked()}),$(".bulk_action input#check-all").on("ifChecked",function(){check_state="check_all",countChecked()}),$(".bulk_action input#check-all").on("ifUnchecked",function(){check_state="uncheck_all",countChecked()});function countChecked(){"check_all"==check_state&&$(".bulk_action input[name='table_records']").iCheck("check"),"uncheck_all"==check_state&&$(".bulk_action input[name='table_records']").iCheck("uncheck");var a=$(".bulk_action input[name='table_records']:checked").length;0<a?($(".column-title").hide(),$(".bulk-actions").show(),$(".action-cnt").html(a+" Records Selected")):($(".column-title").show(),$(".bulk-actions").hide())}$(function(){$(".expand").on("click",function(){$(this).next().slideToggle(200),$expand=$(this).find(">:first-child"),"+"==$expand.text()?$expand.text("-"):$expand.text("+")})}),$(document).ready(function(){$(".scroll-view").niceScroll({touchbehavior:!0,cursorcolor:"rgba(42, 63, 84, 0.35)"})});function toogleMenu(a){a.parent().is(".active")?(a.parent().removeClass("active"),a.next().slideUp(),a.parent().removeClass("nv"),a.parent().addClass("vn")):($("#sidebar-menu li ul").slideUp(),a.parent().removeClass("vn"),a.parent().addClass("nv"),a.next().slideDown(),$("#sidebar-menu li").removeClass("active"),a.parent().addClass("active"))}$.prototype.loadinmodal=function(a,b,c,d){var e=$(this).html("");$(this).hasClass("dialog_exist")||($(this).addClass("dialog_exist"),$.post(a,b,function(a){e.createModal(c,d,a)}))};var openned_modals=0;$.prototype.createModal=function(a,c,d){if(!a)var a={};$(this).addClass("modal").addClass("fade");var e=$("<div/>").addClass("modal-dialog").appendTo($(this));a.width&&e.css("width",a.width+"px");var f=$("<div/>").addClass("modal-content").appendTo(e),g=$("<div/>").addClass("modal-header").append(["undefined"==typeof a.without_close||!0!=a.without_close?$("<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>"):"",$("<h4/>").html(a&&a.title?a.title:"")]).appendTo(f),h=$("<div/>").addClass("modal-body").html(d).appendTo(f),k=$("<div/>").addClass("modal-footer").appendTo(f);for(var l in a.submit&&k.append($("<button/>").addClass("md-raised mini-button md-button md-ink-ripple green-button save").append(["<i class=\"fa fa-save\"></i> ","I\u0161saugoti"]).attr({onclick:a.submit+"()",type:"button"})),a.header_close&&g.prepend($("<button type=\"button\" class=\"close\" aria-label=\"Close\"<span aria-hidden=\"true\">&times;</span></button>").on("click",a.header_close.onclick)),a.buttons){var b=a.buttons[l],m=null;m=b.attr?"object"==typeof b.attr?$("<button/>").attr("type","button").attr(b.attr):$("<button "+b.attr+"/>").attr("type","button"):$("<button/>").attr("type","button"),b.id&&m.attr("id",b.id),b.tooltip&&m.attr("data-tip",b.tooltip),b.class&&m.addClass(b.class),b.tooltip&&m.addClass("tip"),b.onclick&&("function"==typeof b.onclick?m.on("click",b.onclick):m.attr("onclick",b.onclick)),b.icon&&m.append("<i class='"+b.icon+"'></i> "),m.append(b.title).appendTo(k)}a.delete&&k.append($("<button/>").addClass("md-raised mini-button md-button md-ink-ripple red-button").append(["<i class=\"fa fa-trash\"></i> ","I\u0161trinti"]).attr({onclick:a.delete+"()",type:"button"})),("undefined"==typeof a.cancel||!1!=a.cancel)&&k.append($("<button/>").addClass("md-raised mini-button md-button md-ink-ripple").append(["<i class=\"fa fa-close\"></i> ","At\u0161aukti"]).attr({"data-dismiss":"modal",type:"button"})),$(this).modal({show:!0,backdrop:!1});var n=$("body").scrollTop();$(this).on("shown.bs.modal",function(){$(this).find("input:not([type=hidden])").first().focus(),$(this).find(".modal-dialog").css("z-index","1050"),$(this).data("compiled_angular")||(compileAjaxAngular($(this)),$(this).data("compiled_angular",!0)),prepareComponents(),0<$(this).find(".grid-container").length&&$("body").scrollTop(0),openned_modals++}),(0<$(this).find(".grid-container").length||a.onclose)&&$(this).on("hidden.bs.modal",function(b){$("body").scrollTop(n),0<$(this).find(".grid-container").length&&$(this).find(".grid-container").each(function(){Grids[$(this).attr("id")]&&Grids[$(this).attr("id")].Dispose()}),a.onclose&&a.onclose(b)}),a.beforeClose&&$(this).on("hide.bs.modal",function(b){"function"==typeof a.beforeClose?a.beforeClose(b,a):"function"==typeof window[a.beforeClose]&&window[a.beforeClose](a)}),c&&(c.Disable(),$(this).on("hidden.bs.modal",function(){c.Enable()})),$(this).on("hidden.bs.modal",function(){$(this).removeClass("dialog_exist"),openned_modals--,0<openned_modals?$("body").addClass("modal-open"):($("body").removeClass("modal-open"),$(this).data("compiled_angular",!1))}),enableWysiwyg(),$(this).triggerHandler("onAfterElementLoaded")},$.prototype.xpanel=function(){var a=$(this).data(),b="<div><div><div class=\"x_panel\">";if(b+="<div class=\"x_content\""+($(this).hasClass("closed")?" style=\"display: none;\"":"")+"></div>",b+="</div></div></div>",$(this).wrap(b),!$(this).hasClass("no-header"))var c=$(document.createElement("div")).addClass("x_title").append($(document.createElement("h2")).text(a&&a.title?a.title:""),$(document.createElement("ul")).addClass("nav navbar-right panel_toolbox").append($(document.createElement("li")).append($(document.createElement("a")).addClass("collapse-link").data(a).data("open",a.open?" data-open=\""+a.open+"\"":"").data("open",a.close?" data-open=\""+a.close+"\"":"").append($(document.createElement("i")).addClass("fa fa-chevron-"+($(this).hasClass("closed")?"down":"up"))))),$(document.createElement("div")).addClass("clearfix"));$(this).parent().before(c),"undefined"!=typeof window[a.afterLoad]&&"function"==typeof window[a.afterLoad]&&window[a.afterLoad]()},$(document).on({click:function(){var a=$(this).find(".collapse-link").first(),b=$(a).parents(".x_panel").first(),c=$(a).find("i"),d=b.find(".x_content"),e=$(a).data();d.is(":visible")?"function"==typeof window[e.close]&&window[e.close]():(e.url&&d.find(".x-panel").loadContent(e.url,e),"function"==typeof window[e.open]&&window[e.open]()),d.slideToggle(200),b.hasClass("fixed_height_390")?b.toggleClass("").toggleClass("fixed_height_390"):"",b.hasClass("fixed_height_320")?b.toggleClass("").toggleClass("fixed_height_320"):"",c.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),setTimeout(function(){b.resize()},50)}},".x_title");function prepareDateYearPicker(){$(".date-year").datepicker({format:"yyyy",minViewMode:2,language:"lt",orientation:"bottom auto",autoclose:!0})}function prepareComponents(){$(".x-panel:not(\".has-x-panel\")").each(function(){$(this).xpanel(),$(this).addClass("has-x-panel")}),prepareDateYearPicker(),prepareDatePicker(),prepareDateTimePicker(),enableWysiwyg(),enableICheck(),enableMultiselect(),enableSelectpicker(),enableTooltips(),replaceNumberCommaWithDot(),prepareBootstrapDatepicker()}function prepareBootstrapDatepicker(){$(".datepicker:not(\".has-datepicker\")").each(function(){$(".datepicker").datetimepicker({format:"YYYY-MM-DD",locale:"lt"}),$(".datepicker").addClass("has-datepicker")})}function enableTooltips(){$("[data-toggle=\"tooltip\"]").tooltip()}function enableSelectpicker(){$(".selectpicker").selectpicker({dropupAuto:!0})}$.prototype.loadContent=function(a,b,c,d){return b||(b={}),(!$(this).html()||0==$(this).html().trim().length||c)&&$(this).load(a,b,function(){d&&d(),compileAjaxAngular($(this)),prepareComponents()}),$(this)},$.prototype.loadinpanel=function(a,b){$(this).loadContent(a,{},!1,b),enableICheck()};function enableMultiselect(a){"undefined"==typeof a&&(a=!1),$("select.multiselect:not(\".has-multiselect\")").multiselect({enableFiltering:!0,includeSelectAllOption:!0,maxHeight:400,enableCaseInsensitiveFiltering:!0,filterPlaceholder:"Paie\u0161ka",selectAllText:"Pa\u017Eym\u0117ti visus",nonSelectedText:"Pasirinkite",allSelectedText:"Visi pa\u017Eym\u0117ti",nSelectedText:"pasirinkti",buttonWidth:"auto",selectAllName:"select-all-name",dropUp:a}),$("select.multiselect:not(\".has-multiselect\")").addClass("has-multiselect")}var wysiwygEditors={};function enableWysiwyg(a){var b=["placeholder","advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste code"];a&&a.plugins&&(b=b.concat(a.plugins)),$(".wysiwyg:not(.has-wysiwyg)").each(function(a){0==$(this).attr("id").length&&$(this).attr("id","wysiwyg-editor-"+(a+1));var c=$(this).attr("id"),d={selector:"#"+c,plugins:b,toolbar:!$(this).attr("readonly")&&"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent",menubar:!1,statusbar:!$(this).attr("readonly"),toolbar_items_size:"small",readonly:$(this).attr("readonly")?1:0,autoresize_bottom_margin:0,setup:function(a){wysiwygEditors[c]=a,a.on("change",function(){var b=$("#"+c).parents("form").first();0<b.length&&0<b.attr("id").length&&(formChanged[b.attr("id")]=!0),a.save(),$("#"+a.id).attr("onChangeEvent")&&window[$("#"+a.id).attr("onChangeEvent")](a)}),$("#"+a.id).prop("readonly")}};tinymce.init(d),$(this).addClass("has-wysiwyg")})}function enableDropzone(a,b,c,d,e,f,g){Dropzone.autoDiscover=!1,0<$("#"+b+"-dropzone:not(.has-dropzone)").length&&($("#"+b+"-dropzone:not(.has-dropzone)").dropzone({init:function(){var a=this;$("button#clear-dropzone").click(function(){a.removeAllFiles(!0)}),this.on("addedfile",function(){this.on("sending",function(a,c,d){for(i in d.append("description",$("#"+b+"-file_description").val()),d.append("object_id",$("#"+b+"_object_id").val()),d.append("object_code",$("#"+b+"_object_code").val()),d.append("new_object_code",$("#"+b+"_new_object_code").val()),f)d.append(i,f[i])})}),$(document).on("click","#"+b+"-upload_file",function(){a.processQueue()})},paramName:"file",maxFilesize:d,maxFiles:25,parallelUploads:25,addRemoveLinks:!0,uploadMultiple:!0,autoProcessQueue:!1,dictDefaultMessage:"Vilkite failus \u010Dia arba paspauskite nor\u0117dami pasirinkti",dictFileTooBig:"Failo dydis yra didesnis u\u017E leid\u017Eiam\u0105 dyd\u012F: "+d+" mb",dictInvalidFileType:"Neteisingas failo formatas. Leid\u017Eiami tokie failo formatai: image/*,application/pdf,.psd, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .odt, .csv, .txt, .dwg, .dxf, .rar, .zip, .adoc, .7z, .html, .htm, .ods, .webm, .mpg, .mp2, .mpeg, .mpe, .mpv, .ogg, .mp4, .m4p, .m4v, .mov, .avi, .wmv, .msg",dictMaxFilesExceeded:"Vir\u0161ytas maksimalus leid\u017Eiamas fail\u0173 kiekis",dictRemoveFile:"Pa\u0161alinti",url:c,acceptedFiles:"image/*,application/pdf,.psd, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .odt, .csv, .txt, .dwg, .dxf, .rar, .zip, .adoc, .7z, .html, .htm, .ods, .webm, .mpg, .mp2, .mpeg, .mpe, .mpv, .ogg, .mp4, .m4p, .m4v, .mov, .avi, .wmv, .msg",success:function(c,d){if(0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length){var e=$("#"+b+"_documents");if(d.success){for(var f in showMessage(d.success_message,"success"),d.Data){var h=d.Data[f];e.val(h+";"+$(e).val())}angular.element($("#document_list_"+a+" .datatable")).scope().reloadDataTable(),this.removeAllFiles(!0),$("#"+b+"-file_description").val(""),$("#"+b+"_documents_count").text(parseInt($("#"+b+"_documents_count").text())+d.Data.length).triggerHandler("change");var k={file_ids:d.Data},l=$("#"+b+"-document_upload_form"),m=l.data("notify-url");0<$("#"+b+"_object_id").val()&&$.post(m,k),g&&g()}else showMessage(d.error_message,"error")}}}),$("#"+b+"-dropzone:not(.has-dropzone)").addClass("has-dropzone"))}function enableICheck(){0<$("input.flat:not(.has-icheck)").length&&($("input.flat:not(.has-icheck)").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-blue"}),$("input[type=\"checkbox\"]").addClass("has-icheck"))}function moveRowsInDifferentGrids(a,b,c,d,e,f,g,h,k,l,m){$(".choose-materials").attr("disabled","disabled");var n=Grids[a],o=Grids[b],q=n.GetSelRows();n.SelectAllRows(0);var s=m?getGridParents(o.Rows,m):{};for(var t in q){if(q[t].Def&&"Parent"==q[t].Def.Name){if(m){var u=getDublicateGridParent(q[t],o.Rows,m);if(u){s[q[t].id]=u.id;continue}else if(q[t][m]&&o.GetRowById(q[t][m],m)){var v=o.GetRowById(q[t][m],m);v&&v.Deleted&&(v.Deleted=!1),s[q[t].id]=v.id;continue}}if(0<q[t].parent_id&&s[q[t].parent_id])var w=o.AddRow(o.GetRowById(s[q[t].parent_id]),null,1);else var w=o.AddRow(null,null,1);for(p in o.ChangeDef(w,"Parent",1),g)w[p]=g[p];w.Expanded=1,s[q[t].id]=w.id}else var w=o.AddRow(o.GetRowById(s[q[t].parent_id]),null,1);w.is_new=1;var x=o.Cols;for(i in x)if(!e||-1===$.inArray(i,e)){var y=index=i;if(h&&h[i])if($.isArray(h[i]))for(j in h[i])q[t][h[i][j]]&&(y=h[i][j]);else y=h[i];k&&k[i]&&(index=k[i]),q[t][y]&&"id"!=i&&(0<w.parent_id?(o.SetValue(w,index,q[t][y],1),o.ExpandParents(w)):(!f||-1===$.inArray(i,f))&&o.SetValue(w,index,q[t][y],1))}console.log(d),$("#"+d).val($("#"+d).val()+w.tariff_id+";")}$("#"+c).modal("hide"),delete Grids[a],$("#"+c).remove(),l&&l()}function getDublicateGridParent(a,b,c){for(r in b){var d=b[r];if("Data"==d.Kind&&"Parent"==d.Def.Name&&!d.Deleted&&d[c]==a[c])return d}return null}function getGridParents(a,b){var c={};for(r in a){var d=a[r];"Data"!=d.Kind||"Parent"!=d.Def.Name||d.Deleted||(c[d[b]]=d.id)}return c}function getSelectedRows(a){var b=getGridCacheSelectedRows(a);return b?b:void setTimeout(function(){getSelectedRows(a)},200)}function enableSelectWithSearch(a,b,c){$("#"+a).select2({placeholder:b,allowClear:!0,data:c})}function returnBack(a){window.location.href=a}function validateNumbersWithDot(a){var b;return 0<a.keyCode?b=a.which||a.keyCode:"undefined"!=typeof a.charCode&&(b=a.which||a.keyCode),46==b||!(31<b&&(48>b||57<b))}function prepareDateTimePicker(){$(".datetimepicker:not(\".has-datetimepicker\")").each(function(){$(".datetimepicker").datetimepicker({format:"YYYY-MM-DD HH:mm:ss",locale:"lt",maxDate:new Date}),$(".datetimepicker").addClass("has-datetimepicker")})}function prepareDateTimePickerWithMinDate(a,b){$("."+a+":not(\".has-datetimepicker\")").each(function(){$("."+a).datetimepicker({format:"YYYY-MM-DD HH:mm:ss",locale:"lt",maxDate:new Date,minDate:b?b:new Date}),$("."+a).addClass("has-datetimepicker")})}function calculateMonthsDifference(a,b){var c=moment(a).format("YYYY-MM-DD"),d=moment(b).format("YYYY-MM-DD"),e=moment(d).diff(moment(c),"months",!0);return e.toFixed(2)}function getCurrentDate(){var a=moment().format("YYYY-MM-DD");return a}function addOnDayToDate(a,b){if(a){var c=moment(a).add(b,"days").format("YYYY-MM-DD");return c}}function checkEditedInfo(a,b,c,d){var e=!0;if(a&&window[a]()){if(!d){var f=$.now(),g={submit:b,onclose:function(){$("#save-changes-dialog-"+f).remove()},buttons:{exit:{title:"U\u017Edaryti nesaugant pakeitim\u0173",class:"md-raised mini-button md-button md-ink-ripple red-button",onclick:c+"()"}}};$("body").append("<div class=\"save-changes-dialog\" id=\"save-changes-dialog-"+f+"\"></div>"),$("#save-changes-dialog-"+f).createModal(g,null,"<strong>Ar i\u0161saugoti pakeitimus?</strong>")}e=!1}return e}var formChanged=[];function monitorChanges(a){0<$("#"+a).length&&$("#"+a).change(function(){formChanged[a]=!0})}function resetChanges(a,b){b?formChanged=[]:formChanged&&formChanged[a]&&(formChanged[a]=!1)}function checkChanges(a){return!!(formChanged&&formChanged[a]&&!0==formChanged[a])}var ts="";function askForAction(a,b,c,d,e,f,g){f||(f="ask-for-action-dialog");var h=$("<div />").attr("id",f).css("z-index","99999");if($("body").append(h),!e)var e="md-raised mini-button md-primary md-button md-ink-ripple";var k={buttons:{send:{class:e,title:c,onclick:"onclickActionDialog('"+b+"', '"+f+"', "+!!(g&&g.check_for_hide)+")",icon:d,id:"send_for_approval"}},onclose:function(){$("#"+f).remove()}},l="<strong>"+a+"</strong>";g&&g.with_return_reason_form_id&&(l+="<div style=\"margin-top: 18px;\"><form id=\""+g.with_return_reason_form_id+"\"><div class=\"form-group\"><label for=\"return-reason\">Prie\u017Eastis<span class=\"required-symbol\">*</span>:</label><textarea class=\"form-control\" id=\"return-reason\" rows=\"3\" required></textarea></div></form></div>"),g&&g.merge_with_params&&(g.buttons&&(k.buttons=$.extend(k.buttons,g.buttons)),"undefined"!==g.cancel&&(k.cancel=g.cancel)),$("#"+f).createModal(k,null,l)}function onclickActionDialog(a,b,c){b||(b="ask-for-action-dialog"),c||disableButtonOnClick("send_for_approval");var d=window[a];"function"==typeof d?c?d()&&(disableButtonOnClick("send_for_approval"),$("#"+b).modal("hide")):(d(),$("#"+b).modal("hide")):$("#"+b).modal("hide")}function calcSequanceNr(a,b,c){if(a&&"Data"==a.Kind){if(c){var d=1,e=a.parentNode,f=!1;if("I"==e.nodeName)for(;e.nextSibling;)d++,e=e.nextSibling;else f=!0;return a==a.parentNode.firstChild?d+(f?"":".1"):a.previousSibling[b].split(".").slice(0,-1).join(".")+(f?"":".")+(+a.previousSibling[b].split(".").pop()+1)}return a.previousSibling||"B"!=a.parentNode.nodeName?+a.previousSibling[b]+1:1}return""}function activateChooseMaterialsButton(){$(".choose-materials").removeAttr("disabled")}function disableChooseMaterialsButton(){$(".choose-materials").attr("disabled","disabled")}function isNumberKey(a){var b=a.which?a.which:event.keyCode;return!!(48<=b&&57>=b||96<=b&&105>=b||8==b)}function doParentRecursion(a,b,c,d,e){if("Data"==b.Kind)return e||window[c](a,b,d),b.parentNode&&doParentRecursion(a,b.parentNode,c,d),!0}function setParentValue(a,b,c){for(var d in c.cols){var e=c.cols[d];if(c.delta)var f=b[e]+c.delta;else if(c.row_object)var f=b[e]-c.row_object[e];f!==void 0&&(c.exclude_cols?-1==c.exclude_cols.indexOf(e)&&a.SetValue(b,e,f,1):a.SetValue(b,e,f,1))}}function disableButtonOnClick(a){$("#"+a).attr("disabled","disabled")}function enableButtonAfterPost(a){"disabled"==$("#"+a).attr("disabled")&&$("#"+a).removeAttr("disabled")}function replaceNumberCommaWithDot(){$("input.number_value").bind("change keyup input paste keydown",function(a){var b=a.which?a.which:event.keyCode;if((110==b||188==b||17==b||86==b)&&(a.preventDefault(),-1==$(this).val().indexOf(".")&&"keydown"===a.type&&$(this).val($(this).val()+".")),109==b){a.preventDefault();var c=$(this).val();$(this).val(c.replace("-",""))}}),$("input.number_value").keypress(function(a){return isNumber(a,this)})}function onImportFinished(a,b,c){if(b){var d=angular.element($("#"+b+" .datatable")).scope();d.reloadDataTable()}closeModal(a,c)}function isNumber(a,b){var c=a.which?a.which:event.keyCode;return!((45!=c||-1!=$(b).val().indexOf("-"))&&(46!=c||-1!=$(b).val().indexOf("."))&&(48>c||57<c))}function loadDocuments(a,b,c){var d=b.replace("/","_")+"_"+$.now();c||(c={}),c.modal_id=d;var e=BASE_URL+"/core/coreapi/documents",f={object_id:a,object_code:b,can_upload:c&&!0==c.can_upload?1:0,only_one_file:c&&!0==c.only_one_file?1:0,can_delete:c&&!0==c.can_delete?1:0};c&&c.grid_id&&(f.grid_id=c.grid_id),c&&c.row_id&&(f.row_id=c.row_id),c&&c.height&&(f.height=c.height),c.cancel=!1,c.buttons={cancel:{class:"md-raised mini-button md-button md-ink-ripple",title:"U\u017Edaryti",attr:{"data-dismiss":"modal"},onclick:function(){"function"==typeof c.cancel_callback&&c.cancel_callback({modal_id:d})},icon:"fa fa-close"}},$("body").append("<div id=\""+d+"\"></div>"),$("#"+d).loadinmodal(e,f,c)}